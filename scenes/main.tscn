[gd_scene load_steps=50 format=3 uid="uid://d46wrkgdeynk"]

[ext_resource type="Script" path="res://scripts/initialize-webxr.gd" id="1_wh60i"]
[ext_resource type="Script" path="res://scripts/grapple.gd" id="2_mlqdw"]
[ext_resource type="PackedScene" uid="uid://b4kad2kuba1yn" path="res://addons/godot-xr-tools/hands/scenes/lowpoly/left_hand_low.tscn" id="2_symp0"]
[ext_resource type="PackedScene" uid="uid://l2n30mpbkdyw" path="res://addons/godot-xr-tools/hands/scenes/lowpoly/right_hand_low.tscn" id="3_1qm7d"]
[ext_resource type="PackedScene" uid="uid://bl2nuu3qhlb5k" path="res://addons/godot-xr-tools/functions/movement_direct.tscn" id="3_1235y"]
[ext_resource type="PackedScene" uid="uid://b6bk2pj8vbj28" path="res://addons/godot-xr-tools/functions/movement_turn.tscn" id="4_eystt"]
[ext_resource type="PackedScene" uid="uid://c2q5phg8w08o" path="res://addons/godot-xr-tools/functions/movement_jump.tscn" id="5_xjoe5"]
[ext_resource type="PackedScene" uid="uid://b4ysuy43poobf" path="res://addons/godot-xr-tools/functions/function_pickup.tscn" id="7_0xab3"]
[ext_resource type="PackedScene" uid="uid://clt88d5d1dje4" path="res://addons/godot-xr-tools/functions/movement_crouch.tscn" id="7_s6rfv"]
[ext_resource type="PackedScene" uid="uid://bxm1ply47vaan" path="res://addons/godot-xr-tools/functions/movement_climb.tscn" id="8_w8k5l"]
[ext_resource type="PackedScene" uid="uid://c8l60rnugru40" path="res://addons/godot-xr-tools/objects/pickable.tscn" id="10_rnoug"]
[ext_resource type="Script" path="res://addons/godot-xr-tools/player/player_body.gd" id="10_xyo7v"]
[ext_resource type="PackedScene" uid="uid://dh8grd7s3n8kg" path="res://addons/godot-xr-tools/objects/grab_points/grab_point_snap.tscn" id="11_b3yil"]
[ext_resource type="PackedScene" uid="uid://c25yxb0vt53vc" path="res://addons/godot-xr-tools/objects/grab_points/grab_point_hand_left.tscn" id="12_6yniv"]
[ext_resource type="PackedScene" uid="uid://ctw7nbntd5pcj" path="res://addons/godot-xr-tools/objects/grab_points/grab_point_hand_right.tscn" id="13_pk0yp"]
[ext_resource type="PackedScene" uid="uid://knoxbpbfkqy2" path="res://scenes/climbable_capsule.tscn" id="15_xhjuq"]
[ext_resource type="Material" uid="uid://52rf2t3jhkem" path="res://wall.tres" id="17_mp675"]
[ext_resource type="PackedScene" uid="uid://d3vi5m8ygbtv3" path="res://polygon-adventure/models/SM_Bld_Fence_01.fbx" id="18_duc0l"]
[ext_resource type="ArrayMesh" uid="uid://cqtdbrp11iwni" path="res://sheep/Sheep1.obj" id="19_nm4hj"]
[ext_resource type="Script" path="res://addons/godot-xr-tools/objects/pickable.gd" id="19_ohn7p"]
[ext_resource type="AudioStream" uid="uid://dtw4cakxio6o0" path="res://sheep_baa.mp3" id="22_w0o47"]
[ext_resource type="PackedScene" uid="uid://casc03wmcy4m" path="res://polygon-adventure/models/SM_Wep_Staff_01.fbx" id="23_jf37u"]
[ext_resource type="Script" path="res://scripts/cast.gd" id="24_0tlhl"]
[ext_resource type="Material" uid="uid://blcn7tpb74kq1" path="res://cast.tres" id="25_luk70"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_osj4q"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_noqmy"]
sky_material = SubResource("ProceduralSkyMaterial_osj4q")

[sub_resource type="Environment" id="Environment_pi0m0"]
background_mode = 2
sky = SubResource("Sky_noqmy")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_t8w8a"]
albedo_color = Color(0.152941, 0.266667, 0.0980392, 1)

[sub_resource type="PlaneMesh" id="PlaneMesh_a8whk"]
material = SubResource("StandardMaterial3D_t8w8a")
size = Vector2(20, 20)

[sub_resource type="BoxShape3D" id="BoxShape3D_trsr2"]
size = Vector3(20, 1, 20)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ggnmf"]
albedo_color = Color(0.647059, 1, 1, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_f63bk"]
albedo_color = Color(0.647059, 1, 1, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_iywmc"]
size = Vector3(0.5, 1.8, 0.5)

[sub_resource type="TorusMesh" id="TorusMesh_kqvwe"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_rioe7"]
albedo_color = Color(0.0980392, 0.223529, 0.607843, 1)

[sub_resource type="BoxMesh" id="BoxMesh_r5kcp"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_vciuj"]
albedo_color = Color(0.967076, 0.588718, 0.183697, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_py7i6"]

[sub_resource type="BoxMesh" id="BoxMesh_l1mbp"]

[sub_resource type="BoxShape3D" id="BoxShape3D_0ovpl"]

[sub_resource type="BoxShape3D" id="BoxShape3D_prif7"]
size = Vector3(3.5, 2, 0.4)

[sub_resource type="BoxMesh" id="BoxMesh_cvyx7"]
size = Vector3(0.2, 2, 4)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_agvru"]
albedo_color = Color(0.858824, 0.858824, 0.858824, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_trtfe"]
albedo_color = Color(0.180392, 0.180392, 0.180392, 1)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_jfxrb"]
points = PackedVector3Array(-0.567778, -0.015033, -1.43299, -0.854837, -0.00990624, -1.71169, -0.557759, -0.0141785, -1.72328, 0.567392, -0.0146058, -1.43241, 0.971191, -0.0107607, 1.46703, -0.971578, -0.0103335, 1.46703, -0.99314, -0.0103335, 1.11068, -1.10356, 1.78831, -1.96259, -0.864856, 0.43954, -1.89248, -0.576926, 0.433986, -1.89595, 0.576539, 0.434841, -1.89537, 0.556502, -0.0133241, -1.72212, 0.843997, -0.0103335, -1.7088, 0.993407, -0.0107607, 1.11184, 1.01192, 1.86734, 1.237, 0.447384, 3.71084, 2.70932, 0.191034, 3.29942, 3.43128, 0.191034, 3.14305, 3.36059, -0.000193238, 3.12383, 3.41564, 0.710268, -0.0103335, 1.46761, -1.01231, 1.86734, 1.237, -0.191203, 3.14305, 3.36059, -0.191203, 3.29942, 3.43128, -0.447771, 3.71084, 2.70932, -1.01536, 1.21411, 0.893399, -1.11249, 2.73419, -2.08948, -0.905149, 2.06601, -2.12425, -0.613734, 2.03525, -2.2297, 0.00111353, 2.01474, -2.32646, 0.86447, 0.440395, -1.8919, 1.10427, 1.78959, -1.96259, 1.01519, 1.21368, 0.893399, 0.998634, 2.39198, 1.23584, 1.11254, 2.75641, -2.13352, 0.495736, 4.2624, 2.41555, 0.271185, 3.75399, 3.11028, 0.186025, 3.36949, 3.39709, -0.000193238, 3.38957, 3.51066, -0.998803, 2.39198, 1.23584, -0.186194, 3.36949, 3.39709, -0.271353, 3.75399, 3.11028, -0.495904, 4.2624, 2.41555, -0.961341, 3.32121, -2.02458, -0.897308, 2.75128, -2.1932, -0.533148, 4.29658, 2.19247, -0.536633, 4.34571, 1.94158, -0.610685, 2.77905, -2.29807, -0.0165282, 2.84912, -2.40874, 0.593527, 2.79529, -2.33805, 0.616614, 2.04037, -2.23955, 0.908465, 2.07156, -2.1341, 0.532979, 4.29658, 2.19247, 0.891259, 2.76923, -2.23492, 0.946144, 3.34727, -2.086, 0.536464, 4.34571, 1.94158, -0.000193238, 4.31666, 2.6902, 0.301241, 4.16584, 2.69309, -0.000193238, 3.86806, 3.12824, -0.000193238, 3.46775, 3.46315, -0.30141, 4.16584, 2.69309, -0.628544, 3.94924, -0.47752, -0.626802, 3.65872, -1.76732, -0.613952, 3.39469, -2.13641, -0.415754, 4.34955, 1.941, 0.00416267, 4.0428, -1.00364, -0.0176172, 3.50748, -2.18045, 0.586776, 3.41306, -2.18161, 0.619881, 3.67624, -1.80962, 0.634474, 3.95095, -0.480996, 0.415586, 4.34955, 1.941, -0.00585604, 3.85268, -1.7847)

[sub_resource type="BoxShape3D" id="BoxShape3D_5cxkp"]

[sub_resource type="BoxMesh" id="BoxMesh_7x4sx"]

[sub_resource type="BoxMesh" id="BoxMesh_hxw0k"]
material = ExtResource("25_luk70")
size = Vector3(1, 0.02, 0.01)

[sub_resource type="BoxShape3D" id="BoxShape3D_7oxxj"]
size = Vector3(0.05, 3.7, 0.05)

[node name="Main" type="Node3D"]
script = ExtResource("1_wh60i")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_pi0m0")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0, 0.499998, 0.866027, -0.500003, 0.749999, -0.43301, 0, 0, 0)
light_color = Color(1, 1, 0.65098, 1)
shadow_enabled = true

[node name="Ground" type="StaticBody3D" parent="."]

[node name="MeshInstance3D" type="MeshInstance3D" parent="Ground"]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0)
mesh = SubResource("PlaneMesh_a8whk")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Ground"]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, -1, 0)
shape = SubResource("BoxShape3D_trsr2")

[node name="XROrigin3D" type="XROrigin3D" parent="."]

[node name="XRCamera3D" type="XRCamera3D" parent="XROrigin3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6, 0)

[node name="LeftController" type="XRController3D" parent="XROrigin3D"]
tracker = &"left_hand"

[node name="LeftHand" parent="XROrigin3D/LeftController" instance=ExtResource("2_symp0")]
hand_material_override = SubResource("StandardMaterial3D_ggnmf")

[node name="MovementDirect" parent="XROrigin3D/LeftController" instance=ExtResource("3_1235y")]
input_action = "thumbstick"

[node name="MovementTurn" parent="XROrigin3D/LeftController" instance=ExtResource("4_eystt")]
turn_mode = 2
input_action = "thumbstick"

[node name="MovementJump" parent="XROrigin3D/LeftController" instance=ExtResource("5_xjoe5")]
jump_button_action = "ax_button"

[node name="MovementCrouch" parent="XROrigin3D/LeftController" instance=ExtResource("7_s6rfv")]
crouch_button_action = "by_button"

[node name="FunctionPickup" parent="XROrigin3D/LeftController" instance=ExtResource("7_0xab3")]
pickup_axis_action = "trigger"
action_button_action = "grip"
grab_distance = 1.0
grab_collision_mask = 1
ranged_collision_mask = 1

[node name="RightController" type="XRController3D" parent="XROrigin3D"]
tracker = &"right_hand"

[node name="RightHand" parent="XROrigin3D/RightController" instance=ExtResource("3_1qm7d")]
hand_material_override = SubResource("StandardMaterial3D_f63bk")

[node name="MovementDirect" parent="XROrigin3D/RightController" instance=ExtResource("3_1235y")]
input_action = "thumbstick"

[node name="MovementTurn" parent="XROrigin3D/RightController" instance=ExtResource("4_eystt")]
turn_mode = 2
input_action = "thumbstick"

[node name="MovementJump" parent="XROrigin3D/RightController" instance=ExtResource("5_xjoe5")]
jump_button_action = "ax_button"

[node name="MovementCrouch" parent="XROrigin3D/RightController" instance=ExtResource("7_s6rfv")]
crouch_button_action = "by_button"

[node name="FunctionPickup" parent="XROrigin3D/RightController" instance=ExtResource("7_0xab3")]
pickup_axis_action = "trigger"
action_button_action = "grip"
grab_distance = 1.0
grab_collision_mask = 1
ranged_collision_mask = 1

[node name="MovementClimb" parent="XROrigin3D" instance=ExtResource("8_w8k5l")]

[node name="XRToolsPlayerBody" type="CharacterBody3D" parent="XROrigin3D"]
top_level = true
script = ExtResource("10_xyo7v")

[node name="RigidBody3D" type="RigidBody3D" parent="."]
script = ExtResource("2_mlqdw")

[node name="CollisionShape3D" type="CollisionShape3D" parent="RigidBody3D"]
shape = SubResource("BoxShape3D_iywmc")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Button" type="Button" parent="CanvasLayer"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -150.0
offset_top = -75.0
offset_right = 150.0
offset_bottom = 75.0
grow_horizontal = 2
grow_vertical = 2
text = "Enter VR"

[node name="Goal" type="MeshInstance3D" parent="."]
transform = Transform3D(0.792768, 0, -0.107327, 0, 0.8, 0, 0.107327, 0, 0.792768, -7.23483, 10.0002, -4.09703)
visible = false
mesh = SubResource("TorusMesh_kqvwe")
surface_material_override/0 = SubResource("StandardMaterial3D_rioe7")

[node name="Goal2" type="MeshInstance3D" parent="."]
transform = Transform3D(0.792768, 0, -0.107327, 0, 0.8, 0, 0.107327, 0, 0.792768, 0.4262, -0.0817728, 5.70849)
visible = false
mesh = SubResource("TorusMesh_kqvwe")
surface_material_override/0 = SubResource("StandardMaterial3D_rioe7")

[node name="PickableBox" parent="." instance=ExtResource("10_rnoug")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.549997, 1.89502, 5.87188)
visible = false

[node name="Box" type="MeshInstance3D" parent="PickableBox"]
transform = Transform3D(0.3, 0, 0, 0, 0.3, 0, 0, 0, 0.3, 0, 0, 0)
mesh = SubResource("BoxMesh_r5kcp")
surface_material_override/0 = SubResource("StandardMaterial3D_vciuj")

[node name="BoxCollision" type="CollisionShape3D" parent="PickableBox"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
shape = SubResource("BoxShape3D_py7i6")

[node name="GrabPointSnap" parent="PickableBox" instance=ExtResource("11_b3yil")]
visible = true

[node name="GrabPointHandLeft" parent="PickableBox" instance=ExtResource("12_6yniv")]
transform = Transform3D(0.990352, 0.0867201, -0.108089, -0.0607909, 0.972807, 0.223497, 0.124532, -0.214769, 0.968693, 0, 0, 0)

[node name="GrabPointHandRight" parent="PickableBox" instance=ExtResource("13_pk0yp")]

[node name="LADDER" parent="." instance=ExtResource("15_xhjuq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.01708, 1, 0.0348749)

[node name="WALL_SOUTH" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 19.9584)

[node name="MeshInstance3D" type="MeshInstance3D" parent="WALL_SOUTH"]
transform = Transform3D(20, 0, 0, 0, 5, 0, 0, 0, 0.5, 0, 0, 0)
mesh = SubResource("BoxMesh_l1mbp")
skeleton = NodePath("../..")
surface_material_override/0 = ExtResource("17_mp675")

[node name="CollisionShape3D" type="CollisionShape3D" parent="WALL_SOUTH"]
shape = SubResource("BoxShape3D_0ovpl")

[node name="WALL_EAST" type="StaticBody3D" parent="."]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 20.8119, 2, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="WALL_EAST"]
transform = Transform3D(20, 0, 0, 0, 5, 0, 0, 0, 0.5, 0, 0, 0)
mesh = SubResource("BoxMesh_l1mbp")
skeleton = NodePath("../..")
surface_material_override/0 = ExtResource("17_mp675")

[node name="CollisionShape3D" type="CollisionShape3D" parent="WALL_EAST"]
shape = SubResource("BoxShape3D_0ovpl")

[node name="WALL_WEST" type="StaticBody3D" parent="."]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -19.8529, 2, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="WALL_WEST"]
transform = Transform3D(20, 0, 0, 0, 5, 0, 0, 0, 0.5, 0, 0, 0)
mesh = SubResource("BoxMesh_l1mbp")
skeleton = NodePath("../..")
surface_material_override/0 = ExtResource("17_mp675")

[node name="CollisionShape3D" type="CollisionShape3D" parent="WALL_WEST"]
shape = SubResource("BoxShape3D_0ovpl")

[node name="WALL_NORTH" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, -20.7986)

[node name="MeshInstance3D" type="MeshInstance3D" parent="WALL_NORTH"]
transform = Transform3D(20, 0, 0, 0, 5, 0, 0, 0, 0.5, 0, 0, 0)
mesh = SubResource("BoxMesh_l1mbp")
skeleton = NodePath("../..")
surface_material_override/0 = ExtResource("17_mp675")

[node name="CollisionShape3D" type="CollisionShape3D" parent="WALL_NORTH"]
shape = SubResource("BoxShape3D_0ovpl")

[node name="SM_Bld_Fence_01" parent="." instance=ExtResource("18_duc0l")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18.4512, 0, -9.438)

[node name="fence_collision" type="CollisionShape3D" parent="SM_Bld_Fence_01"]
shape = SubResource("BoxShape3D_prif7")

[node name="SM_Bld_Fence_02" parent="." instance=ExtResource("18_duc0l")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 15.0729, 0, -9.438)

[node name="fence_collision" type="CollisionShape3D" parent="SM_Bld_Fence_02"]
shape = SubResource("BoxShape3D_prif7")

[node name="SM_Bld_Fence_03" parent="." instance=ExtResource("18_duc0l")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 11.672, 0, -15.1702)

[node name="fence_collision" type="CollisionShape3D" parent="SM_Bld_Fence_03"]
shape = SubResource("BoxShape3D_prif7")

[node name="SM_Bld_Fence_04" parent="." instance=ExtResource("18_duc0l")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 11.672, 0, -18.3429)

[node name="fence_collision" type="CollisionShape3D" parent="SM_Bld_Fence_04"]
shape = SubResource("BoxShape3D_prif7")

[node name="StaticBody3D" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -17.234, 0.925981, 15.2501)

[node name="MeshInstance3D" type="MeshInstance3D" parent="StaticBody3D"]
mesh = SubResource("BoxMesh_cvyx7")

[node name="Sheep_bounceable" type="RigidBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.348486, 5.17348, -4.80739)
lock_rotation = true
script = ExtResource("19_ohn7p")
picked_up_layer = 1

[node name="sheep_mesh" type="MeshInstance3D" parent="Sheep_bounceable"]
transform = Transform3D(0.25, 0, 0, 0, 0.25, 0, 0, 0, 0.25, 0, 0, 0)
mesh = ExtResource("19_nm4hj")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_agvru")
surface_material_override/1 = SubResource("StandardMaterial3D_trtfe")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Sheep_bounceable"]
transform = Transform3D(0.25, 0, 0, 0, 0.25, 0, 0, 0, 0.25, 0, 0, 0)
shape = SubResource("ConvexPolygonShape3D_jfxrb")

[node name="AudioStreamPlayer3D" type="AudioStreamPlayer3D" parent="Sheep_bounceable"]
stream = ExtResource("22_w0o47")
autoplay = true

[node name="box_bounceable" type="RigidBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.68806, 0.786325, 13.6936)

[node name="CollisionShape3D" type="CollisionShape3D" parent="box_bounceable"]
shape = SubResource("BoxShape3D_5cxkp")

[node name="MeshInstance3D" type="MeshInstance3D" parent="box_bounceable"]
mesh = SubResource("BoxMesh_7x4sx")

[node name="Staff" type="RigidBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.024843, 7.38492)
mass = 100.0
lock_rotation = true
script = ExtResource("19_ohn7p")

[node name="SM_Wep_Staff_01" parent="Staff" instance=ExtResource("23_jf37u")]

[node name="RayCast3D" type="RayCast3D" parent="Staff/SM_Wep_Staff_01"]
transform = Transform3D(6, 0, 0, 0, 45, 0, 0, 0, 1, 0, 0, 0)
target_position = Vector3(-1, 0, 0)
collide_with_areas = true
debug_shape_thickness = 5
script = ExtResource("24_0tlhl")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Staff/SM_Wep_Staff_01/RayCast3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, 0, 0)
mesh = SubResource("BoxMesh_hxw0k")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Staff"]
shape = SubResource("BoxShape3D_7oxxj")
